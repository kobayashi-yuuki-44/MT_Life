<% content_for :head do %>
  <meta name="turbo-visit-control" content="reload">
  <%= javascript_import_module_tag "toggle_memo" %>
<% end %>

<%= render 'questions/question_detail', question: @question, answer: @answer %>

<% if @question.memos.any? %>
  <button id="toggle-memo" class="btn btn-info">メモを見る</button>
  <div id="content" style="display:none;">
    <% @question.memos.each do |memo| %>
      <div class="memo">
        <%= memo.content %>
      </div>
    <% end %>
  </div>
<% end %>

<%= form_with(model: [@question, @question.memos.build], local: true) do |form| %>
  <div class="field">
    <%= form.label :content, "メモ" %>
    <%= form.text_area :content %>
  </div>
  <%= form.submit "メモを保存", class: "btn btn-primary" %>
<% end %>
